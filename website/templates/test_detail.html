{% extends "base.html" %}

{% block title %}{{ test.title }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="card">
        <div class="card-header">
            <h2>{{ test.title }}</h2>
            <span class="badge bg-{{ 'success' if test.is_active else 'secondary' }}">
                {{ 'Активный' if test.is_active else 'Неактивный' }}
            </span>
        </div>

        <div class="card-body">
            <p class="lead">{{ test.description }}</p>

            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card bg-light">
                        <div class="card-body text-center">
                            <h5>Сложность</h5>
                            <span class="badge bg-info fs-6">{{ test.difficulty }}</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-light">
                        <div class="card-body text-center">
                            <h5>Время</h5>
                            <span class="fs-5">{{ test.time_limit // 60 }} мин</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-light">
                        <div class="card-body text-center">
                            <h5>Вопросы</h5>
                            <span class="fs-5">{{ test.questions|length }}</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-light">
                        <div class="card-body text-center">
                            <h5>Проходной балл</h5>
                            <span class="fs-5">{{ test.passing_score }}%</span>
                        </div>
                    </div>
                </div>
            </div>

            {% if not result_id %}
            <div class="alert alert-info">
                <h5>Инструкция:</h5>
                <ul>
                    <li>На прохождение теста дается {{ test.time_limit // 60 }} минут</li>
                    <li>Тест состоит из {{ test.questions|length }} вопросов</li>
                    <li>Для успешной сдачи необходимо набрать {{ test.passing_score }}% правильных ответов</li>
                    <li>После начала теста таймер нельзя остановить</li>
                    <li>Для ответов на вопросы выберите один или несколько вариантов</li>
                </ul>
            </div>

            <form method="POST" action="{{ url_for('main.start_test', test_id=test.id) }}">
                <button type="submit" class="btn btn-primary btn-lg">
                    Начать тест
                </button>
                <a href="{{ url_for('main.tests') }}" class="btn btn-outline-secondary btn-lg">
                    Вернуться к списку тестов
                </a>
            </form>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}